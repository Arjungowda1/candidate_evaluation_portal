<app-header></app-header>
<app-notifier></app-notifier>
<app-dialogs></app-dialogs>
<div class="card bg-light container-fluid mt-2 mb-2" >
    <div class="row">
        <h4 class="col-md-8 p-4" [ngsReveal]="{ duration: 2000,delay:500}"><b>Add Weightage for Evaluation form fields</b></h4>
    </div>
</div>
<div class="container mt-5 mb-5" [ngsReveal]="{ duration: 2000,delay:500}">
    <div class="row align-items-center">
        <div class="col=md-4 mr-4 p-4">Want to create a new Evaluation Criteria?</div>
        <div class="col=md-8 p-4">
            <form>
                <div class="row align-items-center">
                    <div class="col-md-10">
                        <input type="email" class="form-control" aria-describedby="emailHelp" placeholder="Enter Criteria Name">
                    </div>
                    <div class="col-md-2">
                        <button class="btn add-btn" value="button"><i class="fa fa-plus" aria-hidden="true"></i><h6>Add</h6></button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>   
<hr style="width: 70%;">
<div class="container mt-4 mb-4" [ngsReveal]="{ duration: 2000,delay:500}">
    <form novalidate  [formGroup]="cepWeightageForm"  (ngSubmit) = "createWeight()">
        <div class="row">
            <div class="col-md-6 form-group">
                <label for="education">Education</label>
                <span class="text-danger" *ngIf="cepWeightageForm.get('education').errors && cepWeightageForm.get('education').hasError('required')">*</span>
                <input type="number" class="form-control" formControlName = "education"
                  [class.is-invalid] = "cepWeightageForm.get('education').invalid && cepWeightageForm.get('education').touched"
                placeholder="Enter the weightage for education" onkeypress="return /[0-9]/i.test(event.key)">
                <small class="text-danger"  *ngIf="cepWeightageForm.get('education').hasError('max')"><b>The maximum range for this field is 100.</b></small>
                <small class="text-danger"  *ngIf="cepWeightageForm.get('education').hasError('pattern')"><b>Invalid Weightage.</b></small>
            </div>
            <div class="col-md-6 form-group">
                <label for="programming">Programming Skills</label>
                <span class="text-danger" *ngIf="cepWeightageForm.get('programming').errors && cepWeightageForm.get('programming').hasError('required')">*</span>
                <input type="number" class="form-control" formControlName = "programming"
                [class.is-invalid] = "cepWeightageForm.get('programming').invalid && cepWeightageForm.get('programming').touched"
                 placeholder="Enter the weightage for programming skills" onkeypress="return /[0-9]/i.test(event.key)" >
                 <small class="text-danger"  *ngIf="cepWeightageForm.get('programming').hasError('max')"><b>The maximum range for this field is 100.</b></small>
                 <small class="text-danger"  *ngIf="cepWeightageForm.get('programming').hasError('pattern')"><b>Invalid Weightage.</b></small>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 form-group">
                <label for="adaptibility">Adaptibility</label>
                <span class="text-danger" *ngIf="cepWeightageForm.get('adaptibility').errors && cepWeightageForm.get('adaptibility').hasError('required')">*</span>
                <input type="number" class="form-control"  formControlName = "adaptibility"
                [class.is-invalid] = "cepWeightageForm.get('adaptibility').invalid && cepWeightageForm.get('adaptibility').touched"
                 placeholder="Enter the weightage for adaptibility" onkeypress="return /[0-9]/i.test(event.key)">
                 <small class="text-danger"  *ngIf="cepWeightageForm.get('adaptibility').hasError('max')"><b>The maximum range for this field is 100.</b></small>
                 <small class="text-danger"  *ngIf="cepWeightageForm.get('adaptibility').hasError('pattern')"><b>Invalid Weightage.</b></small>

            </div>
            <div class="col-md-6 form-group">
                <label for="problem">Problem Solving</label>
                <span class="text-danger" *ngIf="cepWeightageForm.get('problem').errors && cepWeightageForm.get('problem').hasError('required')">*</span>
                <input type="number" class="form-control" formControlName = "problem"
                [class.is-invalid] = "cepWeightageForm.get('problem').invalid && cepWeightageForm.get('problem').touched"                
                placeholder="Enter the weightage for problem solving" onkeypress="return /[0-9]/i.test(event.key)" >
                <small class="text-danger"  *ngIf="cepWeightageForm.get('problem').hasError('max')"><b>The maximum range for this field is 100.</b></small>
                <small class="text-danger"  *ngIf="cepWeightageForm.get('problem').hasError('pattern')"><b>Invalid Weightage.</b></small>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 form-group">
                <label for="logical">Logical Skills</label>
                <span class="text-danger" *ngIf="cepWeightageForm.get('logical').errors && cepWeightageForm.get('logical').hasError('required')">*</span>
                <input type="number" class="form-control" formControlName = "logical"
                [class.is-invalid] = "cepWeightageForm.get('logical').invalid && cepWeightageForm.get('logical').touched"
                placeholder="Enter the weightage for logical skills" onkeypress="return /[0-9]/i.test(event.key)">
                <small class="text-danger"  *ngIf="cepWeightageForm.get('logical').hasError('max')"><b>The maximum range for this field is 100.</b></small>
                <small class="text-danger"  *ngIf="cepWeightageForm.get('logical').hasError('pattern')"><b>Invalid Weightage.</b></small>
            </div>
            <div class="col-md-6 form-group">
                <label for="interpersonal">Interpersonal Skills</label>
                <span class="text-danger" *ngIf="cepWeightageForm.get('interpersonal').errors && cepWeightageForm.get('interpersonal').hasError('required')">*</span>
                <input type="number" class="form-control" formControlName = "interpersonal"
                [class.is-invalid] = "cepWeightageForm.get('interpersonal').invalid && cepWeightageForm.get('interpersonal').touched"
                 placeholder="Enter weightage for interpersonal skills" onkeypress="return /[0-9]/i.test(event.key)" >
                <small class="text-danger"  *ngIf="cepWeightageForm.get('interpersonal').hasError('max')"><b>The maximum range for this field is 100.</b></small>
                <small class="text-danger"  *ngIf="cepWeightageForm.get('interpersonal').hasError('pattern')"><b>Invalid Weightage.</b></small>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-md-6 form-group">
                <label for="cutoff">Cut Off Marks</label>
                <span class="text-danger" *ngIf="cepWeightageForm.get('cutoff').errors && cepWeightageForm.get('cutoff').hasError('required')">*</span>
                <input type="number" class="form-control"  formControlName = "cutoff"
                [class.is-invalid] = "cepWeightageForm.get('cutoff').invalid && cepWeightageForm.get('cutoff').touched"
                placeholder="Enter the cut off for clearing the interview" onkeypress="return /[0-9]/i.test(event.key)">
                <small class="text-danger"  *ngIf="cepWeightageForm.get('cutoff').hasError('min')"><b>The minimum value for this field is 100.</b></small>
                
            </div>
        </div>
        <div class="row">
            <div class="col-md-4"></div>
            <div class="col-md-4 text-center">
                <button type="button" *ngIf="btndisplay" [disabled]="cepWeightageForm.invalid" class="mt-5 btn btn-block mybtn btn-success tx-tfm" (click)="modalData()" data-toggle="modal" data-target="#myModal" >Click to proceed</button>
                <small [hidden]="btndisplay" class="text-danger mt-4"><b>Weightage already created! Delete to create another.</b></small>
            </div>
            <div class="col-md-4"></div>
        </div>
    </form>

</div>

<div *ngIf="exists">
    <div class="card bg-light container-fluid mt-4 mb-2" >
        <h4 class="p-4" [ngsReveal]="{ duration: 1000,delay:500}"><b>Existing weightage</b></h4>
    </div>
    <div  class="container mt-5 mb-5 " [ngsReveal]="{ duration: 800,delay:900}">
        <table class="table table-hover">
            <thead class="thead-dark">
                <tr>
                  <th scope="col">Created Date</th>
                  <th scope="col">Details</th>
                  <th scope="col">Modify</th>
                </tr>
              </thead>
            <tbody >
              <tr>
                <td>{{weightageDate}}</td>
                <td >
                    <div class="row" *ngFor="let w of existingWeightage">
                        <div class="col-md-6">
                            {{w.evaluationFactor}} :
                        </div>
                        <div class="col-md-6">
                            {{w.weightage}}
                        </div>
                    </div>
                </td>
                <td><button type="submit" class="delete-btn" (click)="deleteWeightage($event, weight)"><i class="fa fa-user-times text-danger"></i></button></td>
              </tr>
            </tbody>
        </table>
    </div>
</div>

<app-footer></app-footer>



<div class="modal" id="myModal"> 
    <div class="modal-dialog">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">Confirm creation?</h4>
                <button type="button" class="close" (click)="closeClick()" data-dismiss="modal">&times;</button>
            </div>

            <!-- Modal body -->
            <div class="modal-body">
                <small class="text-danger "><b>Would you like to proceed with the following values for weightage?</b></small>
                <table class="table mt-3">
                    <thead class="thead-dark ">
                        <tr>
                          <th scope="col">Evaluation Factor</th>
                          <th scope="col">1 point equivalent</th>
                        </tr>
                      </thead>
                    <tbody>
                      <tr *ngFor = "let c of confirmWeightage">
                        <td>{{c.evaluationFactor}}</td>
                        <td>{{ c.weightage }}</td>
                      </tr>
                    </tbody>
                </table>
            </div>

            <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" (click)="closeClick()" data-dismiss="modal">Cancel</button>
                <button type="submit" form="WeightageForm"  mat-button (click)="createWeight()" class="btn btn-success" data-dismiss="modal">Confirm</button>
            </div>

        </div>
    </div>

